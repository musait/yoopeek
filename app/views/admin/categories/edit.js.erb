$("#editCategory").html("<%= j(render partial: 'edit_category_modal') %>");
$("#editCategoryModal").find(".modal-content");
$("#editCategoryModal").modal()

$(".tag_select").select2({
  theme: "bootstrap",
  tags: true,
  tokenSeparators: [",", " "]
    }).on("change", function (e) {
      var isNew = $(this).find('[data-select2-tag="true"]');
      if (isNew.length) {
        $.ajax({
            type: "POST",
            url: "/admin/categories/new_tag",
            data: {tag: isNew.val()},
            success: function(data){ // success est toujours en place, bien sûr !
              isNew.val(data.id)
            },
        });
      }
})


$(".subcategory_select").select2({
  theme: "bootstrap",
  tags: true,
  tokenSeparators: [",", " "]
    }).on("change", function (e) {
      var isNew = $(this).find('[data-select2-tag="true"]');
      debugger
      if (isNew.length) {
        $.ajax({
            type: "POST",
            url: "/admin/categories/new_subcategory",
            data: {subcategory: isNew.val()},
            success: function(data){ // success est toujours en place, bien sûr !
              isNew.val(data.id)
            },
        });
      }
})
